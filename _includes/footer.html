<small>&copy; {{ site.time | date: '%Y' }} <strong>Kanak Agarwal</strong>.
  Published with <a href="https://pages.github.com/" rel="nofollow">GitHub Pages</a>,
  powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a>,
  based on the <a href="https://mademistakes.com/" rel="nofollow">Minimal Mistakes</a> theme.
  Source code for this website can be found <a href="https://github.com/kanakaero/kanakaero.github.io" rel="nofollow">here</a>.
  
</small>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById('theme-toggle');
    const theme1 = document.getElementById('theme_source');
    const theme2 = document.getElementById('theme_source_2');
    const icon = toggle.querySelector('i');

    function applyTheme(theme) {
      const isDark = theme === 'dark';
      theme1.setAttribute('rel', isDark ? 'stylesheet alternate' : 'stylesheet');
      theme2.setAttribute('rel', isDark ? 'stylesheet' : 'stylesheet alternate');
      sessionStorage.setItem('theme', theme);
      if (icon) icon.classList.replace(isDark ? 'fa-moon' : 'fa-sun', isDark ? 'fa-sun' : 'fa-moon');
    }

    toggle.addEventListener("click", function (e) {
      e.preventDefault();
      const current = sessionStorage.getItem('theme') === 'dark' ? 'light' : 'dark';
      applyTheme(current);
    });

    const stored = sessionStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initial = stored || (prefersDark ? 'dark' : 'light');
    applyTheme(initial);
  });
</script>

